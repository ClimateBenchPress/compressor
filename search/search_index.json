{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"ClimateBenchPress This repository contains the main functionality for the ClimateBenchPress compression benchmark. Getting Started This project uses the uv package manager to handle dependencies. If you don't already have it installed follow the instructions at https://docs.astral.sh/uv/getting-started/installation/ . Next, clone this repository and within the project directory install all the necessary dependencies with: uv sync uv pip install -e \".\" Downloading the Data Make sure you have all the necessary data downloaded by following the instructions at https://github.com/ClimateBenchPress/data-loader . Using the Benchmark Further details on how to run the benchmark evaluation code. Funding ClimateBenchPress has been developed as part of Embed2Scale and ESiWACE3 . Funded by the European Union. This work has received funding from the European High Performance Computing Joint Undertaking (JU) under grant agreement No 101093054 and EU\u2019s Horizon Europe program under grant agreement number 101131841. This work also received funding from UK Research and Innovation (UKRI) .","title":"Home"},{"location":"#climatebenchpress","text":"This repository contains the main functionality for the ClimateBenchPress compression benchmark.","title":"ClimateBenchPress"},{"location":"#getting-started","text":"This project uses the uv package manager to handle dependencies. If you don't already have it installed follow the instructions at https://docs.astral.sh/uv/getting-started/installation/ . Next, clone this repository and within the project directory install all the necessary dependencies with: uv sync uv pip install -e \".\"","title":"Getting Started"},{"location":"#downloading-the-data","text":"Make sure you have all the necessary data downloaded by following the instructions at https://github.com/ClimateBenchPress/data-loader .","title":"Downloading the Data"},{"location":"#using-the-benchmark","text":"Further details on how to run the benchmark evaluation code.","title":"Using the Benchmark"},{"location":"#funding","text":"ClimateBenchPress has been developed as part of Embed2Scale and ESiWACE3 . Funded by the European Union. This work has received funding from the European High Performance Computing Joint Undertaking (JU) under grant agreement No 101093054 and EU\u2019s Horizon Europe program under grant agreement number 101131841. This work also received funding from UK Research and Innovation (UKRI) .","title":"Funding"},{"location":"run_benchmark/","text":"Evaluating the Benchmark Results To evaluate the benchmark results, ensure you have data at path/to/data-loader/datasets , which should be downloaded using the data loader . On a high-level the benchmark evaluation pipeline progresses in the following steps: Compute three error bound levels for each input dataset. Compress each input dataset with all the benchmark compressors for all three error bounds. Compute compressor performance metrics for evaluation purposes. Optional: Create summary plots of the benchmark results. We will now go through each of these steps in more detail. As you work through these steps, the pipeline will progressively populate the directories datasets-error-bounds , compressed-datasets , metrics , and plots . Create Error Bounds Begin by creating the error bounds for each dataset using the following command: uv run python -m climatebenchpress.compressor.scripts.create_error_bounds \\ --data-loader-basepath = path/to/data-loader This step creates three error bounds for each variable in the datasets and stores the information in the datasets-error-bounds directory. Compress Input Datasets Next, compress all the input datasets by running: uv run python -m climatebenchpress.compressor.scripts.compress \\ --data-loader-basepath = path/to/data-loader This command will populate the compressed-datasets directory with the following structure: compressed-datasets/ dataset1/ {var_name}-{err_bound_type}={low_err_bound_val}_{var_name2}-{err_bound_type2}={low_err_bound_val2} compressor1/ decompressed.zarr measurements.json compressor2/ ... {var_name}-{err_bound_type}={mid_err_bound_val}_{var_name2}-{err_bound_type2}={mid_err_bound_val2}/ ... {var_name}-{err_bound_type}={high_err_bound_val}_{var_name2}-{err_bound_type2}={high_err_bound_val2}/ ... dataset2/ ... ... For each dataset, the results for the three different error bounds are stored in different directories. The var_name indicates the variable(s) in the dataset that are being compressed, while err_bound_type will be either abs_error or rel_error . You can use additional arguments to control which compressors and datasets are processed: --exclude-compressor and --exclude-dataset to avoid using certain compressors and datasets, or --include-compressor and --include-dataset to only use selected compressors on selected datasets. For example, the command uv run python -m climatebenchpress.compressor.scripts.compress \\ --data-loader-basepath = path/to/data-loader \\ --include-compressor sz3 jpeg2000 \\ --include-dataset era5 compresses the era5 data with the compressors SZ3 and JPEG2000. These arguments are particularly useful if you wish to parallelize the benchmark evaluation using tools such as xargs . Compute Metrics After compression, evaluate compression metrics on the compressed datasets using: uv run python -m climatebenchpress.compressor.scripts.compute_metrics \\ --data-loader-basepath = path/to/data-loader You can apply the same filtering options with --exclude-compressor , --exclude-dataset , --include-compressor and --include-dataset arguments as used in the compression step. Once the metrics are computed, combine all the metrics into a single CSV file by running: uv run python -m climatebenchpress.compressor.scripts.concatenate_metrics This will create the metrics/all_results.csv file which contains all the results. Optional: Create Plots Finally, generate visualization plots with the following command: uv run python -m climatebenchpress.compressor.plotting.plot_metrics \\ --data-loader-basepath = path/to/data-loader This will create plots in the plots directory. By default, this assumes access to a LaTeX compiler. If you do not have one on your system, you can add the --avoid-latex flag to this command. Note that the full plotting process can take quite a lot of time because it generates individual plots for each error bound-compressor-dataset combination. If you want to avoid generating individual plots for certain datasets, you can do so with the --exclude-dataset command line option.","title":"Run the benchmark"},{"location":"run_benchmark/#evaluating-the-benchmark-results","text":"To evaluate the benchmark results, ensure you have data at path/to/data-loader/datasets , which should be downloaded using the data loader . On a high-level the benchmark evaluation pipeline progresses in the following steps: Compute three error bound levels for each input dataset. Compress each input dataset with all the benchmark compressors for all three error bounds. Compute compressor performance metrics for evaluation purposes. Optional: Create summary plots of the benchmark results. We will now go through each of these steps in more detail. As you work through these steps, the pipeline will progressively populate the directories datasets-error-bounds , compressed-datasets , metrics , and plots .","title":"Evaluating the Benchmark Results"},{"location":"run_benchmark/#create-error-bounds","text":"Begin by creating the error bounds for each dataset using the following command: uv run python -m climatebenchpress.compressor.scripts.create_error_bounds \\ --data-loader-basepath = path/to/data-loader This step creates three error bounds for each variable in the datasets and stores the information in the datasets-error-bounds directory.","title":"Create Error Bounds"},{"location":"run_benchmark/#compress-input-datasets","text":"Next, compress all the input datasets by running: uv run python -m climatebenchpress.compressor.scripts.compress \\ --data-loader-basepath = path/to/data-loader This command will populate the compressed-datasets directory with the following structure: compressed-datasets/ dataset1/ {var_name}-{err_bound_type}={low_err_bound_val}_{var_name2}-{err_bound_type2}={low_err_bound_val2} compressor1/ decompressed.zarr measurements.json compressor2/ ... {var_name}-{err_bound_type}={mid_err_bound_val}_{var_name2}-{err_bound_type2}={mid_err_bound_val2}/ ... {var_name}-{err_bound_type}={high_err_bound_val}_{var_name2}-{err_bound_type2}={high_err_bound_val2}/ ... dataset2/ ... ... For each dataset, the results for the three different error bounds are stored in different directories. The var_name indicates the variable(s) in the dataset that are being compressed, while err_bound_type will be either abs_error or rel_error . You can use additional arguments to control which compressors and datasets are processed: --exclude-compressor and --exclude-dataset to avoid using certain compressors and datasets, or --include-compressor and --include-dataset to only use selected compressors on selected datasets. For example, the command uv run python -m climatebenchpress.compressor.scripts.compress \\ --data-loader-basepath = path/to/data-loader \\ --include-compressor sz3 jpeg2000 \\ --include-dataset era5 compresses the era5 data with the compressors SZ3 and JPEG2000. These arguments are particularly useful if you wish to parallelize the benchmark evaluation using tools such as xargs .","title":"Compress Input Datasets"},{"location":"run_benchmark/#compute-metrics","text":"After compression, evaluate compression metrics on the compressed datasets using: uv run python -m climatebenchpress.compressor.scripts.compute_metrics \\ --data-loader-basepath = path/to/data-loader You can apply the same filtering options with --exclude-compressor , --exclude-dataset , --include-compressor and --include-dataset arguments as used in the compression step. Once the metrics are computed, combine all the metrics into a single CSV file by running: uv run python -m climatebenchpress.compressor.scripts.concatenate_metrics This will create the metrics/all_results.csv file which contains all the results.","title":"Compute Metrics"},{"location":"run_benchmark/#optional-create-plots","text":"Finally, generate visualization plots with the following command: uv run python -m climatebenchpress.compressor.plotting.plot_metrics \\ --data-loader-basepath = path/to/data-loader This will create plots in the plots directory. By default, this assumes access to a LaTeX compiler. If you do not have one on your system, you can add the --avoid-latex flag to this command. Note that the full plotting process can take quite a lot of time because it generates individual plots for each error bound-compressor-dataset combination. If you want to avoid generating individual plots for certain datasets, you can do so with the --exclude-dataset command line option.","title":"Optional: Create Plots"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/","text":"abc climatebenchpress.compressor.compressors.abc NamedPerVariableCodec dataclass NamedPerVariableCodec( name: ErrorBoundName , codecs: dict [ VariableName , Callable [[], Codec ]], ) Dataclass representing a codec for one dataset and compressor. Attributes: name ( str ) \u2013 Name of the error bound used to create the codecs, a combination of variable names and error bounds. codecs ( dict [ VariableName , Callable [[], Codec ]] ) \u2013 Dictionary mapping variable names to codec constructors. name instance-attribute name: ErrorBoundName codecs instance-attribute codecs: dict [ VariableName , Callable [[], Codec ]] ErrorBound dataclass ErrorBound( abs_error: Optional [ float ] = None , rel_error: Optional [ float ] = None , ) Dataclass representing an error bound for a variable. Can only have one of abs_error or rel_error set, not both. Attributes: abs_error ( Optional [ float ] ) \u2013 Absolute error bound for the variable. rel_error ( Optional [ float ] ) \u2013 Relative error bound for the variable. abs_error class-attribute instance-attribute abs_error: Optional [ float ] = None rel_error class-attribute instance-attribute rel_error: Optional [ float ] = None Compressor Bases: ABC Abstract base class for compressors. name instance-attribute name: str description instance-attribute description: str abs_bound_codec abstractmethod staticmethod abs_bound_codec( error_bound: float , * , dtype: Optional [ np . dtype ] = None , data_min: Optional [ float ] = None , data_max: Optional [ float ] = None , ) -> Codec Create a codec with an absolute error bound. rel_bound_codec abstractmethod staticmethod rel_bound_codec( error_bound: float , * , dtype: Optional [ np . dtype ] = None , data_min: Optional [ float ] = None , data_max: Optional [ float ] = None , ) -> Codec Create a codec with a relative error bound. build classmethod build( dtypes: dict [ VariableName , np . dtype ], data_abs_min: dict [ VariableName , float ], data_abs_max: dict [ VariableName , float ], data_min: dict [ VariableName , float ], data_max: dict [ VariableName , float ], error_bounds: list [ dict [ VariableName , ErrorBound ]], ) -> dict [ VariantName , list [ NamedPerVariableCodec ]] Constructs a dictionary of codecs based on the provided error bounds. The dictionary has a separate entry for each compressor variant. Compressor variants are created when transforming between absolute and relative error bounds (each variant accounts for a different way to transform the error bound). The dictionary values are lists of NamedPerVariableCodec instances where each element in the list corresponds to a different value for the error bound. Parameters: dtypes ( dict [ VariableName , numpy . dtype ] ) \u2013 Dict mapping from variable name to data type of the input data. data_abs_min ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to minimum absolute value for the variable. data_abs_max ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to maximum absolute value for the variable. data_min ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to minimum value for the variable. data_max ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to maximum value for the variable. error_bounds ( list [ dict [ VariableName , ErrorBound ]] ) \u2013 List of error bounds to use for the compressor. Returns: dict [ VariantName , list [ NamedPerVariableCodec ]] \u2013 A dictionary where keys are codec variant names (for separate error bound conversions) and values are lists of NamedPerVariableCodec instances configured with the specified error bounds. registry registry() -> Mapping [ str , type [ Compressor ]] has_abs_error_impl has_abs_error_impl() -> bool has_rel_error_impl has_rel_error_impl() -> bool","title":"abc"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#abc","text":"climatebenchpress.compressor.compressors.abc","title":"abc"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.NamedPerVariableCodec","text":"NamedPerVariableCodec( name: ErrorBoundName , codecs: dict [ VariableName , Callable [[], Codec ]], ) Dataclass representing a codec for one dataset and compressor. Attributes: name ( str ) \u2013 Name of the error bound used to create the codecs, a combination of variable names and error bounds. codecs ( dict [ VariableName , Callable [[], Codec ]] ) \u2013 Dictionary mapping variable names to codec constructors.","title":"NamedPerVariableCodec"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.NamedPerVariableCodec.name","text":"name: ErrorBoundName","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.NamedPerVariableCodec.codecs","text":"codecs: dict [ VariableName , Callable [[], Codec ]]","title":"codecs"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.ErrorBound","text":"ErrorBound( abs_error: Optional [ float ] = None , rel_error: Optional [ float ] = None , ) Dataclass representing an error bound for a variable. Can only have one of abs_error or rel_error set, not both. Attributes: abs_error ( Optional [ float ] ) \u2013 Absolute error bound for the variable. rel_error ( Optional [ float ] ) \u2013 Relative error bound for the variable.","title":"ErrorBound"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.ErrorBound.abs_error","text":"abs_error: Optional [ float ] = None","title":"abs_error"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.ErrorBound.rel_error","text":"rel_error: Optional [ float ] = None","title":"rel_error"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor","text":"Bases: ABC Abstract base class for compressors.","title":"Compressor"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.name","text":"name: str","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.description","text":"description: str","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.abs_bound_codec","text":"abs_bound_codec( error_bound: float , * , dtype: Optional [ np . dtype ] = None , data_min: Optional [ float ] = None , data_max: Optional [ float ] = None , ) -> Codec Create a codec with an absolute error bound.","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.rel_bound_codec","text":"rel_bound_codec( error_bound: float , * , dtype: Optional [ np . dtype ] = None , data_min: Optional [ float ] = None , data_max: Optional [ float ] = None , ) -> Codec Create a codec with a relative error bound.","title":"rel_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.build","text":"build( dtypes: dict [ VariableName , np . dtype ], data_abs_min: dict [ VariableName , float ], data_abs_max: dict [ VariableName , float ], data_min: dict [ VariableName , float ], data_max: dict [ VariableName , float ], error_bounds: list [ dict [ VariableName , ErrorBound ]], ) -> dict [ VariantName , list [ NamedPerVariableCodec ]] Constructs a dictionary of codecs based on the provided error bounds. The dictionary has a separate entry for each compressor variant. Compressor variants are created when transforming between absolute and relative error bounds (each variant accounts for a different way to transform the error bound). The dictionary values are lists of NamedPerVariableCodec instances where each element in the list corresponds to a different value for the error bound. Parameters: dtypes ( dict [ VariableName , numpy . dtype ] ) \u2013 Dict mapping from variable name to data type of the input data. data_abs_min ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to minimum absolute value for the variable. data_abs_max ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to maximum absolute value for the variable. data_min ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to minimum value for the variable. data_max ( dict [ VariableName , float ] ) \u2013 Dict mapping from variable name to maximum value for the variable. error_bounds ( list [ dict [ VariableName , ErrorBound ]] ) \u2013 List of error bounds to use for the compressor. Returns: dict [ VariantName , list [ NamedPerVariableCodec ]] \u2013 A dictionary where keys are codec variant names (for separate error bound conversions) and values are lists of NamedPerVariableCodec instances configured with the specified error bounds.","title":"build"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.registry","text":"registry() -> Mapping [ str , type [ Compressor ]]","title":"registry"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.has_abs_error_impl","text":"has_abs_error_impl() -> bool","title":"has_abs_error_impl"},{"location":"_ref/climatebenchpress/compressor/compressors/abc/#climatebenchpress.compressor.compressors.abc.Compressor.has_rel_error_impl","text":"has_rel_error_impl() -> bool","title":"has_rel_error_impl"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround/","text":"bitround climatebenchpress.compressor.compressors.bitround BitRound Bases: Compressor Bit Rounding compressor. This compressor applies bit rounding to the data, which reduces the precision of the data while preserving its overall structure. It then applies the Zstandard lossless codec for further compression. name class-attribute instance-attribute name = 'bitround' description class-attribute instance-attribute description = 'Bit Rounding' rel_bound_codec staticmethod rel_bound_codec(error_bound, * , dtype = None , ** kwargs)","title":"bitround"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround/#bitround","text":"climatebenchpress.compressor.compressors.bitround","title":"bitround"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround/#climatebenchpress.compressor.compressors.bitround.BitRound","text":"Bases: Compressor Bit Rounding compressor. This compressor applies bit rounding to the data, which reduces the precision of the data while preserving its overall structure. It then applies the Zstandard lossless codec for further compression.","title":"BitRound"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround/#climatebenchpress.compressor.compressors.bitround.BitRound.name","text":"name = 'bitround'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround/#climatebenchpress.compressor.compressors.bitround.BitRound.description","text":"description = 'Bit Rounding'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround/#climatebenchpress.compressor.compressors.bitround.BitRound.rel_bound_codec","text":"rel_bound_codec(error_bound, * , dtype = None , ** kwargs)","title":"rel_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround_pco/","text":"bitround_pco climatebenchpress.compressor.compressors.bitround_pco BitRoundPco Bases: Compressor Bit Rounding + PCodec compressor. This compressor first applies bit rounding to the data, which reduces the precision of the data while preserving its overall structure. After that, it uses PCodec for further compression. name class-attribute instance-attribute name = 'bitround-pco' description class-attribute instance-attribute description = 'Bit Rounding + PCodec' rel_bound_codec staticmethod rel_bound_codec(error_bound, * , dtype = None , ** kwargs)","title":"bitround_pco"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround_pco/#bitround_pco","text":"climatebenchpress.compressor.compressors.bitround_pco","title":"bitround_pco"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround_pco/#climatebenchpress.compressor.compressors.bitround_pco.BitRoundPco","text":"Bases: Compressor Bit Rounding + PCodec compressor. This compressor first applies bit rounding to the data, which reduces the precision of the data while preserving its overall structure. After that, it uses PCodec for further compression.","title":"BitRoundPco"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround_pco/#climatebenchpress.compressor.compressors.bitround_pco.BitRoundPco.name","text":"name = 'bitround-pco'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround_pco/#climatebenchpress.compressor.compressors.bitround_pco.BitRoundPco.description","text":"description = 'Bit Rounding + PCodec'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/bitround_pco/#climatebenchpress.compressor.compressors.bitround_pco.BitRoundPco.rel_bound_codec","text":"rel_bound_codec(error_bound, * , dtype = None , ** kwargs)","title":"rel_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/jpeg2000/","text":"jpeg2000 climatebenchpress.compressor.compressors.jpeg2000 Jpeg2000 Bases: Compressor JPEG2000 compressor. Note that JPEG2000 does not guarantee pointwise error bounds, but only average error bounds through specifying a target Peak Signal to Noise Ratio (PSNR). We convert the absolute error bound to a PSNR value using the formula: PSNR = 20 * (log10(data_range) - log10(error_bound)) where data_range = max(data) - min(data) . Additionally, JPEG2000 expects integer data, not floating point, so we linearly quantize the data into integers ranging between 0 and 2 25 - 1, with 2 25-1 the maximum integer value accepted by JPEG2000. name class-attribute instance-attribute name = 'jpeg2000' description class-attribute instance-attribute description = 'JPEG 2000' abs_bound_codec staticmethod abs_bound_codec( error_bound, * , data_min = None , data_max = None , dtype = None , ** kwargs, )","title":"jpeg2000"},{"location":"_ref/climatebenchpress/compressor/compressors/jpeg2000/#jpeg2000","text":"climatebenchpress.compressor.compressors.jpeg2000","title":"jpeg2000"},{"location":"_ref/climatebenchpress/compressor/compressors/jpeg2000/#climatebenchpress.compressor.compressors.jpeg2000.Jpeg2000","text":"Bases: Compressor JPEG2000 compressor. Note that JPEG2000 does not guarantee pointwise error bounds, but only average error bounds through specifying a target Peak Signal to Noise Ratio (PSNR). We convert the absolute error bound to a PSNR value using the formula: PSNR = 20 * (log10(data_range) - log10(error_bound)) where data_range = max(data) - min(data) . Additionally, JPEG2000 expects integer data, not floating point, so we linearly quantize the data into integers ranging between 0 and 2 25 - 1, with 2 25-1 the maximum integer value accepted by JPEG2000.","title":"Jpeg2000"},{"location":"_ref/climatebenchpress/compressor/compressors/jpeg2000/#climatebenchpress.compressor.compressors.jpeg2000.Jpeg2000.name","text":"name = 'jpeg2000'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/jpeg2000/#climatebenchpress.compressor.compressors.jpeg2000.Jpeg2000.description","text":"description = 'JPEG 2000'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/jpeg2000/#climatebenchpress.compressor.compressors.jpeg2000.Jpeg2000.abs_bound_codec","text":"abs_bound_codec( error_bound, * , data_min = None , data_max = None , dtype = None , ** kwargs, )","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/sperr/","text":"sperr climatebenchpress.compressor.compressors.sperr Sperr Bases: Compressor SPERR compressor. name class-attribute instance-attribute name = 'sperr' description class-attribute instance-attribute description = 'SPERR' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs)","title":"sperr"},{"location":"_ref/climatebenchpress/compressor/compressors/sperr/#sperr","text":"climatebenchpress.compressor.compressors.sperr","title":"sperr"},{"location":"_ref/climatebenchpress/compressor/compressors/sperr/#climatebenchpress.compressor.compressors.sperr.Sperr","text":"Bases: Compressor SPERR compressor.","title":"Sperr"},{"location":"_ref/climatebenchpress/compressor/compressors/sperr/#climatebenchpress.compressor.compressors.sperr.Sperr.name","text":"name = 'sperr'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/sperr/#climatebenchpress.compressor.compressors.sperr.Sperr.description","text":"description = 'SPERR'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/sperr/#climatebenchpress.compressor.compressors.sperr.Sperr.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround/","text":"stochround climatebenchpress.compressor.compressors.stochround StochRound Bases: Compressor Stochastic Rounding + PCodec compressor. This compressor first applies stochastic rounding to the data, which adds noise to the data while rounding it. After that, it uses Zstandard for further compression. name class-attribute instance-attribute name = 'stochround' description class-attribute instance-attribute description = 'Stochastic Rounding' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs)","title":"stochround"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround/#stochround","text":"climatebenchpress.compressor.compressors.stochround","title":"stochround"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround/#climatebenchpress.compressor.compressors.stochround.StochRound","text":"Bases: Compressor Stochastic Rounding + PCodec compressor. This compressor first applies stochastic rounding to the data, which adds noise to the data while rounding it. After that, it uses Zstandard for further compression.","title":"StochRound"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround/#climatebenchpress.compressor.compressors.stochround.StochRound.name","text":"name = 'stochround'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround/#climatebenchpress.compressor.compressors.stochround.StochRound.description","text":"description = 'Stochastic Rounding'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround/#climatebenchpress.compressor.compressors.stochround.StochRound.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround_pco/","text":"stochround_pco climatebenchpress.compressor.compressors.stochround_pco StochRoundPco Bases: Compressor Stochastic Rounding + PCodec compressor. This compressor first applies stochastic rounding to the data, which adds noise to the data while rounding it. After that, it uses PCodec for further compression. name class-attribute instance-attribute name = 'stochround-pco' description class-attribute instance-attribute description = 'Stochastic Rounding + PCodec' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs)","title":"stochround_pco"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround_pco/#stochround_pco","text":"climatebenchpress.compressor.compressors.stochround_pco","title":"stochround_pco"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround_pco/#climatebenchpress.compressor.compressors.stochround_pco.StochRoundPco","text":"Bases: Compressor Stochastic Rounding + PCodec compressor. This compressor first applies stochastic rounding to the data, which adds noise to the data while rounding it. After that, it uses PCodec for further compression.","title":"StochRoundPco"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround_pco/#climatebenchpress.compressor.compressors.stochround_pco.StochRoundPco.name","text":"name = 'stochround-pco'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround_pco/#climatebenchpress.compressor.compressors.stochround_pco.StochRoundPco.description","text":"description = 'Stochastic Rounding + PCodec'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/stochround_pco/#climatebenchpress.compressor.compressors.stochround_pco.StochRoundPco.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/","text":"sz3 climatebenchpress.compressor.compressors.sz3 Sz3 Bases: Compressor SZ3 compressor. name class-attribute instance-attribute name = 'sz3' description class-attribute instance-attribute description = 'SZ3' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs) rel_bound_codec staticmethod rel_bound_codec(error_bound, ** kwargs)","title":"sz3"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/#sz3","text":"climatebenchpress.compressor.compressors.sz3","title":"sz3"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/#climatebenchpress.compressor.compressors.sz3.Sz3","text":"Bases: Compressor SZ3 compressor.","title":"Sz3"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/#climatebenchpress.compressor.compressors.sz3.Sz3.name","text":"name = 'sz3'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/#climatebenchpress.compressor.compressors.sz3.Sz3.description","text":"description = 'SZ3'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/#climatebenchpress.compressor.compressors.sz3.Sz3.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/sz3/#climatebenchpress.compressor.compressors.sz3.Sz3.rel_bound_codec","text":"rel_bound_codec(error_bound, ** kwargs)","title":"rel_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/","text":"tthresh climatebenchpress.compressor.compressors.tthresh Tthresh Bases: Compressor Tthresh compressor. name class-attribute instance-attribute name = 'tthresh' description class-attribute instance-attribute description = 'tthresh' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs) rel_bound_codec staticmethod rel_bound_codec(error_bound, ** kwargs)","title":"tthresh"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/#tthresh","text":"climatebenchpress.compressor.compressors.tthresh","title":"tthresh"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/#climatebenchpress.compressor.compressors.tthresh.Tthresh","text":"Bases: Compressor Tthresh compressor.","title":"Tthresh"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/#climatebenchpress.compressor.compressors.tthresh.Tthresh.name","text":"name = 'tthresh'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/#climatebenchpress.compressor.compressors.tthresh.Tthresh.description","text":"description = 'tthresh'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/#climatebenchpress.compressor.compressors.tthresh.Tthresh.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/tthresh/#climatebenchpress.compressor.compressors.tthresh.Tthresh.rel_bound_codec","text":"rel_bound_codec(error_bound, ** kwargs)","title":"rel_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/utils/","text":"utils climatebenchpress.compressor.compressors.utils compute_keepbits compute_keepbits(dtype: np . dtype , rel_error: float ) -> int Computes the number of mantissa bits to keep in order to satisfy a relative error bound. Parameters: dtype ( numpy . dtype ) \u2013 Data type of the input array. rel_error ( float ) \u2013 Relative error bound. Returns: int \u2013 Number of mantissa bits to keep.","title":"utils"},{"location":"_ref/climatebenchpress/compressor/compressors/utils/#utils","text":"climatebenchpress.compressor.compressors.utils","title":"utils"},{"location":"_ref/climatebenchpress/compressor/compressors/utils/#climatebenchpress.compressor.compressors.utils.compute_keepbits","text":"compute_keepbits(dtype: np . dtype , rel_error: float ) -> int Computes the number of mantissa bits to keep in order to satisfy a relative error bound. Parameters: dtype ( numpy . dtype ) \u2013 Data type of the input array. rel_error ( float ) \u2013 Relative error bound. Returns: int \u2013 Number of mantissa bits to keep.","title":"compute_keepbits"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp/","text":"zfp climatebenchpress.compressor.compressors.zfp Zfp Bases: Compressor ZFP compressor. name class-attribute instance-attribute name = 'zfp' description class-attribute instance-attribute description = 'ZFP' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs)","title":"zfp"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp/#zfp","text":"climatebenchpress.compressor.compressors.zfp","title":"zfp"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp/#climatebenchpress.compressor.compressors.zfp.Zfp","text":"Bases: Compressor ZFP compressor.","title":"Zfp"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp/#climatebenchpress.compressor.compressors.zfp.Zfp.name","text":"name = 'zfp'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp/#climatebenchpress.compressor.compressors.zfp.Zfp.description","text":"description = 'ZFP'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp/#climatebenchpress.compressor.compressors.zfp.Zfp.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp_round/","text":"zfp_round climatebenchpress.compressor.compressors.zfp_round ZfpRound Bases: Compressor ZFP-ROUND compressor. This is an adjusted version of the ZFP compressor with an improved rounding mechanism for the transform coefficients. name class-attribute instance-attribute name = 'zfp-round' description class-attribute instance-attribute description = 'ZFP-ROUND' abs_bound_codec staticmethod abs_bound_codec(error_bound, ** kwargs)","title":"zfp_round"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp_round/#zfp_round","text":"climatebenchpress.compressor.compressors.zfp_round","title":"zfp_round"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp_round/#climatebenchpress.compressor.compressors.zfp_round.ZfpRound","text":"Bases: Compressor ZFP-ROUND compressor. This is an adjusted version of the ZFP compressor with an improved rounding mechanism for the transform coefficients.","title":"ZfpRound"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp_round/#climatebenchpress.compressor.compressors.zfp_round.ZfpRound.name","text":"name = 'zfp-round'","title":"name"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp_round/#climatebenchpress.compressor.compressors.zfp_round.ZfpRound.description","text":"description = 'ZFP-ROUND'","title":"description"},{"location":"_ref/climatebenchpress/compressor/compressors/zfp_round/#climatebenchpress.compressor.compressors.zfp_round.ZfpRound.abs_bound_codec","text":"abs_bound_codec(error_bound, ** kwargs)","title":"abs_bound_codec"},{"location":"_ref/climatebenchpress/compressor/metrics/abc/","text":"abc climatebenchpress.compressor.metrics.abc Metric Bases: ABC Base class for metrics. __call__ abstractmethod __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute a metric between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) Returns: metric ( float ) \u2013 The value of the computed metric","title":"abc"},{"location":"_ref/climatebenchpress/compressor/metrics/abc/#abc","text":"climatebenchpress.compressor.metrics.abc","title":"abc"},{"location":"_ref/climatebenchpress/compressor/metrics/abc/#climatebenchpress.compressor.metrics.abc.Metric","text":"Bases: ABC Base class for metrics.","title":"Metric"},{"location":"_ref/climatebenchpress/compressor/metrics/abc/#climatebenchpress.compressor.metrics.abc.Metric.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute a metric between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) Returns: metric ( float ) \u2013 The value of the computed metric","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/metrics/dssim/","text":"dssim climatebenchpress.compressor.metrics.dssim DSSIM Bases: Metric __call__ __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Implementation of the data-SSIM (dSSIM) metric presented in [1], This is an extension of the standard structural similarity index (SSIM) to floating point data. The implementation is adapted from the official implementation [2] to be able to handle our data format. Here we assume that the input data has shape (realization, time, vertical, latitude, longitude). The dSSIM metric is defined for 2D fields, so we compute the dSSIM for each vertical slice and then take the minimum value over all vertical slices (this follows the official implementation of [1]). The final dSSIM value is the average over the realization and time dimensions. NOTE: This implementation can return values > 1.0 in the case that one of the inputs has large regions with NaNs and the other input does not. This is because the astropy.convolution.convolve function linearly interpolates the NaN values. The interpolation of NaN is an explicit design decision made in [1]. In practice, this metric should not be used for data with large regions of NaNs. References: [1] A. H. Baker, A. Pinard and D. M. Hammerling, \"On a Structural Similarity Index Approach for Floating-Point Data,\" in IEEE Transactions on Visualization and Computer Graphics [2] https://github.com/NCAR/ldcpy/blob/6c5bcb8149ec7876a4f53b0e784e9c528f6f14cb/ldcpy/calcs.py#L2516 Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"dssim"},{"location":"_ref/climatebenchpress/compressor/metrics/dssim/#dssim","text":"climatebenchpress.compressor.metrics.dssim","title":"dssim"},{"location":"_ref/climatebenchpress/compressor/metrics/dssim/#climatebenchpress.compressor.metrics.dssim.DSSIM","text":"Bases: Metric","title":"DSSIM"},{"location":"_ref/climatebenchpress/compressor/metrics/dssim/#climatebenchpress.compressor.metrics.dssim.DSSIM.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Implementation of the data-SSIM (dSSIM) metric presented in [1], This is an extension of the standard structural similarity index (SSIM) to floating point data. The implementation is adapted from the official implementation [2] to be able to handle our data format. Here we assume that the input data has shape (realization, time, vertical, latitude, longitude). The dSSIM metric is defined for 2D fields, so we compute the dSSIM for each vertical slice and then take the minimum value over all vertical slices (this follows the official implementation of [1]). The final dSSIM value is the average over the realization and time dimensions. NOTE: This implementation can return values > 1.0 in the case that one of the inputs has large regions with NaNs and the other input does not. This is because the astropy.convolution.convolve function linearly interpolates the NaN values. The interpolation of NaN is an explicit design decision made in [1]. In practice, this metric should not be used for data with large regions of NaNs. References: [1] A. H. Baker, A. Pinard and D. M. Hammerling, \"On a Structural Similarity Index Approach for Floating-Point Data,\" in IEEE Transactions on Visualization and Computer Graphics [2] https://github.com/NCAR/ldcpy/blob/6c5bcb8149ec7876a4f53b0e784e9c528f6f14cb/ldcpy/calcs.py#L2516 Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/metrics/mae/","text":"mae climatebenchpress.compressor.metrics.mae MAE Bases: Metric __call__ __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the mean absolute error between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"mae"},{"location":"_ref/climatebenchpress/compressor/metrics/mae/#mae","text":"climatebenchpress.compressor.metrics.mae","title":"mae"},{"location":"_ref/climatebenchpress/compressor/metrics/mae/#climatebenchpress.compressor.metrics.mae.MAE","text":"Bases: Metric","title":"MAE"},{"location":"_ref/climatebenchpress/compressor/metrics/mae/#climatebenchpress.compressor.metrics.mae.MAE.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the mean absolute error between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/metrics/max_abs_error/","text":"max_abs_error climatebenchpress.compressor.metrics.max_abs_error MaxAbsError Bases: Metric __call__ __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the maximum absolute error between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"max_abs_error"},{"location":"_ref/climatebenchpress/compressor/metrics/max_abs_error/#max_abs_error","text":"climatebenchpress.compressor.metrics.max_abs_error","title":"max_abs_error"},{"location":"_ref/climatebenchpress/compressor/metrics/max_abs_error/#climatebenchpress.compressor.metrics.max_abs_error.MaxAbsError","text":"Bases: Metric","title":"MaxAbsError"},{"location":"_ref/climatebenchpress/compressor/metrics/max_abs_error/#climatebenchpress.compressor.metrics.max_abs_error.MaxAbsError.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the maximum absolute error between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/metrics/max_rel_error/","text":"max_rel_error climatebenchpress.compressor.metrics.max_rel_error MaxRelError Bases: Metric __call__ __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the maximum relative error between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"max_rel_error"},{"location":"_ref/climatebenchpress/compressor/metrics/max_rel_error/#max_rel_error","text":"climatebenchpress.compressor.metrics.max_rel_error","title":"max_rel_error"},{"location":"_ref/climatebenchpress/compressor/metrics/max_rel_error/#climatebenchpress.compressor.metrics.max_rel_error.MaxRelError","text":"Bases: Metric","title":"MaxRelError"},{"location":"_ref/climatebenchpress/compressor/metrics/max_rel_error/#climatebenchpress.compressor.metrics.max_rel_error.MaxRelError.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the maximum relative error between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/metrics/psnr/","text":"psnr climatebenchpress.compressor.metrics.psnr PSNR Bases: Metric __call__ __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the peak signal-to-noise ratio (PSNR) between an input x and its reconstruction y . This implementation assumes that the input data has shape (realization, time, vertical, latitude, longitude). The PSNR gets computed over the vertical, latitude, and longitude dimensions. The return value is then the average over the other dimensions (realization and time). Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"psnr"},{"location":"_ref/climatebenchpress/compressor/metrics/psnr/#psnr","text":"climatebenchpress.compressor.metrics.psnr","title":"psnr"},{"location":"_ref/climatebenchpress/compressor/metrics/psnr/#climatebenchpress.compressor.metrics.psnr.PSNR","text":"Bases: Metric","title":"PSNR"},{"location":"_ref/climatebenchpress/compressor/metrics/psnr/#climatebenchpress.compressor.metrics.psnr.PSNR.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the peak signal-to-noise ratio (PSNR) between an input x and its reconstruction y . This implementation assumes that the input data has shape (realization, time, vertical, latitude, longitude). The PSNR gets computed over the vertical, latitude, and longitude dimensions. The return value is then the average over the other dimensions (realization and time). Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude)","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/metrics/spectral_error/","text":"spectral_error climatebenchpress.compressor.metrics.spectral_error SpectralError Bases: Metric __call__ __call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the mean squared error in the spectral energy between the two inputs. Spectral energy is computed using the radially averaged power spectral density on the (lon, lat) 2D field and then the error is averaged over the remaining dimensions. Parameters: x ( xr . DataArray ) \u2013 Shape: (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape: (realization, time, vertical, latitude, longitude)","title":"spectral_error"},{"location":"_ref/climatebenchpress/compressor/metrics/spectral_error/#spectral_error","text":"climatebenchpress.compressor.metrics.spectral_error","title":"spectral_error"},{"location":"_ref/climatebenchpress/compressor/metrics/spectral_error/#climatebenchpress.compressor.metrics.spectral_error.SpectralError","text":"Bases: Metric","title":"SpectralError"},{"location":"_ref/climatebenchpress/compressor/metrics/spectral_error/#climatebenchpress.compressor.metrics.spectral_error.SpectralError.__call__","text":"__call__ (x: xr . DataArray , y: xr . DataArray ) -> float Compute the mean squared error in the spectral energy between the two inputs. Spectral energy is computed using the radially averaged power spectral density on the (lon, lat) 2D field and then the error is averaged over the remaining dimensions. Parameters: x ( xr . DataArray ) \u2013 Shape: (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape: (realization, time, vertical, latitude, longitude)","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/plotting/plot_metrics/","text":"plot_metrics climatebenchpress.compressor.plotting.plot_metrics DISTORTION2LEGEND_NAME module-attribute DISTORTION2LEGEND_NAME = { \"Relative MAE\" : \"Mean Absolute Error\" , \"Relative DSSIM\" : \"DSSIM\" , \"Relative MaxAbsError\" : \"Max Absolute Error\" , \"Spectral Error\" : \"Spectral Error\" , } plot_metrics plot_metrics( basepath: Path = Path (), data_loader_basepath: None | Path = None , bound_names: list [ str ] = [ \"low\" , \"mid\" , \"high\" ], exclude_dataset: list [ str ] = [], exclude_compressor: list [ str ] = [], tiny_datasets: bool = False , chunked_datasets: bool = False , use_latex: bool = True , ) Create diagnostic plots for the metrics computed by the compressors. Parameters: basepath ( Path , default: Path () ) \u2013 Assumes compressed datasets are stored in basepath / compressed-datasets and metrics in basepath / metrics . data_loader_basepath ( None | Path , default: None ) \u2013 Assumes datasets are stored in data_loader_basepath / datasets . If None, uses basepath / datasets . bound_names ( list [ str ] , default: ['low', 'mid', 'high'] ) \u2013 Names of the error bounds to use for plotting. exclude_dataset ( list [ str ] , default: [] ) \u2013 List of dataset names to exclude from the plotting. exclude_compressor ( list [ str ] , default: [] ) \u2013 List of compressor names to exclude from the plotting. tiny_datasets ( bool , default: False ) \u2013 If True, only plot the tiny datasets. Defaults to False. use_latex ( bool , default: True ) \u2013 If True, use LaTeX for rendering text in the plots. Defaults to True.","title":"plot_metrics"},{"location":"_ref/climatebenchpress/compressor/plotting/plot_metrics/#plot_metrics","text":"climatebenchpress.compressor.plotting.plot_metrics","title":"plot_metrics"},{"location":"_ref/climatebenchpress/compressor/plotting/plot_metrics/#climatebenchpress.compressor.plotting.plot_metrics.DISTORTION2LEGEND_NAME","text":"DISTORTION2LEGEND_NAME = { \"Relative MAE\" : \"Mean Absolute Error\" , \"Relative DSSIM\" : \"DSSIM\" , \"Relative MaxAbsError\" : \"Max Absolute Error\" , \"Spectral Error\" : \"Spectral Error\" , }","title":"DISTORTION2LEGEND_NAME"},{"location":"_ref/climatebenchpress/compressor/plotting/plot_metrics/#climatebenchpress.compressor.plotting.plot_metrics.plot_metrics","text":"plot_metrics( basepath: Path = Path (), data_loader_basepath: None | Path = None , bound_names: list [ str ] = [ \"low\" , \"mid\" , \"high\" ], exclude_dataset: list [ str ] = [], exclude_compressor: list [ str ] = [], tiny_datasets: bool = False , chunked_datasets: bool = False , use_latex: bool = True , ) Create diagnostic plots for the metrics computed by the compressors. Parameters: basepath ( Path , default: Path () ) \u2013 Assumes compressed datasets are stored in basepath / compressed-datasets and metrics in basepath / metrics . data_loader_basepath ( None | Path , default: None ) \u2013 Assumes datasets are stored in data_loader_basepath / datasets . If None, uses basepath / datasets . bound_names ( list [ str ] , default: ['low', 'mid', 'high'] ) \u2013 Names of the error bounds to use for plotting. exclude_dataset ( list [ str ] , default: [] ) \u2013 List of dataset names to exclude from the plotting. exclude_compressor ( list [ str ] , default: [] ) \u2013 List of compressor names to exclude from the plotting. tiny_datasets ( bool , default: False ) \u2013 If True, only plot the tiny datasets. Defaults to False. use_latex ( bool , default: True ) \u2013 If True, use LaTeX for rendering text in the plots. Defaults to True.","title":"plot_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/compress/","text":"compress climatebenchpress.compressor.scripts.compress compress compress( basepath: Path = Path (), exclude_dataset: Container [ str ] = tuple (), include_dataset: None | Container [ str ] = None , exclude_compressor: Container [ str ] = tuple (), include_compressor: None | Container [ str ] = None , data_loader_basepath: None | Path = None , progress: bool = True , ) Compress datasets with compressors. Parameters: basepath ( Path , default: Path () ) \u2013 Compressed dataset will be stored in basepath / compressed-datasets . exclude_dataset ( Container [ str ] , default: tuple () ) \u2013 Datasets to exclude from compression. include_dataset ( None | Container [ str ] , default: None ) \u2013 Datasets to include in compression. If None , all datasets are included. If specified, only datasets in include_dataset will be compressed. exclude_compressor ( Container [ str ] , default: tuple () ) \u2013 Compressors to exclude from compression. include_compressor ( None | Container [ str ] , default: None ) \u2013 Compressors to include in compression. If None , all compressors are included. If specified, only compressors in include_compressor will be used. data_loader_basepath ( None | Path , default: None ) \u2013 Base path for the data loader datasets. If None , defaults to basepath / .. / data-loader . Input datasets will be loaded from data_loader_basepath / datasets . progress ( bool , default: True ) \u2013 Whether to show a progress bar during compression.","title":"compress"},{"location":"_ref/climatebenchpress/compressor/scripts/compress/#compress","text":"climatebenchpress.compressor.scripts.compress","title":"compress"},{"location":"_ref/climatebenchpress/compressor/scripts/compress/#climatebenchpress.compressor.scripts.compress.compress","text":"compress( basepath: Path = Path (), exclude_dataset: Container [ str ] = tuple (), include_dataset: None | Container [ str ] = None , exclude_compressor: Container [ str ] = tuple (), include_compressor: None | Container [ str ] = None , data_loader_basepath: None | Path = None , progress: bool = True , ) Compress datasets with compressors. Parameters: basepath ( Path , default: Path () ) \u2013 Compressed dataset will be stored in basepath / compressed-datasets . exclude_dataset ( Container [ str ] , default: tuple () ) \u2013 Datasets to exclude from compression. include_dataset ( None | Container [ str ] , default: None ) \u2013 Datasets to include in compression. If None , all datasets are included. If specified, only datasets in include_dataset will be compressed. exclude_compressor ( Container [ str ] , default: tuple () ) \u2013 Compressors to exclude from compression. include_compressor ( None | Container [ str ] , default: None ) \u2013 Compressors to include in compression. If None , all compressors are included. If specified, only compressors in include_compressor will be used. data_loader_basepath ( None | Path , default: None ) \u2013 Base path for the data loader datasets. If None , defaults to basepath / .. / data-loader . Input datasets will be loaded from data_loader_basepath / datasets . progress ( bool , default: True ) \u2013 Whether to show a progress bar during compression.","title":"compress"},{"location":"_ref/climatebenchpress/compressor/scripts/compute_metrics/","text":"compute_metrics climatebenchpress.compressor.scripts.compute_metrics compute_metrics compute_metrics( basepath: Path = Path (), data_loader_basepath: None | Path = None , exclude_dataset: Iterable [ str ] = tuple (), include_dataset: None | Iterable [ str ] = None , exclude_compressor: Iterable [ str ] = tuple (), include_compressor: None | Iterable [ str ] = None , ) Compute evaluation metrics for compressors. Parameters: basepath ( Path , default: Path () ) \u2013 Assumes the compressed datasets are stored in basepath / compressed-datasets . Computed metrics will be stored in basepath / metrics . data_loader_basepath ( None | Path , default: None ) \u2013 Base path for the data loader datasets. If None , defaults to basepath / .. / data-loader . Input datasets will be loaded from data_loader_basepath / datasets . exclude_dataset ( Iterable [ str ] , default: tuple () ) \u2013 Datasets to exclude from evaluation. include_dataset ( None | Iterable [ str ] , default: None ) \u2013 Datasets to include in evaluation. If None , all datasets are included. If specified, only datasets in include_dataset will be evaluated. exclude_compressor ( Iterable [ str ] , default: tuple () ) \u2013 Compressors to exclude from evaluation. include_compressor ( None | Iterable [ str ] , default: None ) \u2013 Compressors to include in evaluation. If None , all compressors are included. If specified, only compressors in include_compressor will be evaluated.","title":"compute_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/compute_metrics/#compute_metrics","text":"climatebenchpress.compressor.scripts.compute_metrics","title":"compute_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/compute_metrics/#climatebenchpress.compressor.scripts.compute_metrics.compute_metrics","text":"compute_metrics( basepath: Path = Path (), data_loader_basepath: None | Path = None , exclude_dataset: Iterable [ str ] = tuple (), include_dataset: None | Iterable [ str ] = None , exclude_compressor: Iterable [ str ] = tuple (), include_compressor: None | Iterable [ str ] = None , ) Compute evaluation metrics for compressors. Parameters: basepath ( Path , default: Path () ) \u2013 Assumes the compressed datasets are stored in basepath / compressed-datasets . Computed metrics will be stored in basepath / metrics . data_loader_basepath ( None | Path , default: None ) \u2013 Base path for the data loader datasets. If None , defaults to basepath / .. / data-loader . Input datasets will be loaded from data_loader_basepath / datasets . exclude_dataset ( Iterable [ str ] , default: tuple () ) \u2013 Datasets to exclude from evaluation. include_dataset ( None | Iterable [ str ] , default: None ) \u2013 Datasets to include in evaluation. If None , all datasets are included. If specified, only datasets in include_dataset will be evaluated. exclude_compressor ( Iterable [ str ] , default: tuple () ) \u2013 Compressors to exclude from evaluation. include_compressor ( None | Iterable [ str ] , default: None ) \u2013 Compressors to include in evaluation. If None , all compressors are included. If specified, only compressors in include_compressor will be evaluated.","title":"compute_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/concatenate_metrics/","text":"concatenate_metrics climatebenchpress.compressor.scripts.concatenate_metrics concatenate_metrics concatenate_metrics(basepath: Path = Path ()) Concatenate metrics from all datasets and compressors into a single CSV file. Parameters: basepath ( Path , default: Path () ) \u2013 Assumes that the metrics are stored in basepath / metrics . The script will create a basepath / metrics / all_results.csv file containing the concatenated results.","title":"concatenate_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/concatenate_metrics/#concatenate_metrics","text":"climatebenchpress.compressor.scripts.concatenate_metrics","title":"concatenate_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/concatenate_metrics/#climatebenchpress.compressor.scripts.concatenate_metrics.concatenate_metrics","text":"concatenate_metrics(basepath: Path = Path ()) Concatenate metrics from all datasets and compressors into a single CSV file. Parameters: basepath ( Path , default: Path () ) \u2013 Assumes that the metrics are stored in basepath / metrics . The script will create a basepath / metrics / all_results.csv file containing the concatenated results.","title":"concatenate_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/create_error_bounds/","text":"create_error_bounds climatebenchpress.compressor.scripts.create_error_bounds create_error_bounds create_error_bounds( basepath: Path = Path (), data_loader_basepath: None | Path = None , ) Create three error bounds for all datasets and the variables in them. Parameters: basepath ( Path , default: Path () ) \u2013 The base path where the error bounds will be stored. The error bounds will be stored in basepath / datasets-error-bounds . data_loader_basepath ( Path , default: None ) \u2013 The base path where the datasets are stored. If not provided, it defaults to basepath / .. / data-loader . The datasets will be loaded from data_loader_basepath / datasets .","title":"create_error_bounds"},{"location":"_ref/climatebenchpress/compressor/scripts/create_error_bounds/#create_error_bounds","text":"climatebenchpress.compressor.scripts.create_error_bounds","title":"create_error_bounds"},{"location":"_ref/climatebenchpress/compressor/scripts/create_error_bounds/#climatebenchpress.compressor.scripts.create_error_bounds.create_error_bounds","text":"create_error_bounds( basepath: Path = Path (), data_loader_basepath: None | Path = None , ) Create three error bounds for all datasets and the variables in them. Parameters: basepath ( Path , default: Path () ) \u2013 The base path where the error bounds will be stored. The error bounds will be stored in basepath / datasets-error-bounds . data_loader_basepath ( Path , default: None ) \u2013 The base path where the datasets are stored. If not provided, it defaults to basepath / .. / data-loader . The datasets will be loaded from data_loader_basepath / datasets .","title":"create_error_bounds"},{"location":"_ref/climatebenchpress/compressor/scripts/print_metrics/","text":"print_metrics climatebenchpress.compressor.scripts.print_metrics print_metrics print_metrics(basepath: Path = Path ())","title":"print_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/print_metrics/#print_metrics","text":"climatebenchpress.compressor.scripts.print_metrics","title":"print_metrics"},{"location":"_ref/climatebenchpress/compressor/scripts/print_metrics/#climatebenchpress.compressor.scripts.print_metrics.print_metrics","text":"print_metrics(basepath: Path = Path ())","title":"print_metrics"},{"location":"_ref/climatebenchpress/compressor/tests/abc/","text":"abc climatebenchpress.compressor.tests.abc Test Bases: ABC Base class for pass/fail tests for compressors. __call__ abstractmethod __call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ] Perform a test between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) Returns: success, value : tuple[bool, float] \u2013 The success of the test and the value of its statistic","title":"abc"},{"location":"_ref/climatebenchpress/compressor/tests/abc/#abc","text":"climatebenchpress.compressor.tests.abc","title":"abc"},{"location":"_ref/climatebenchpress/compressor/tests/abc/#climatebenchpress.compressor.tests.abc.Test","text":"Bases: ABC Base class for pass/fail tests for compressors.","title":"Test"},{"location":"_ref/climatebenchpress/compressor/tests/abc/#climatebenchpress.compressor.tests.abc.Test.__call__","text":"__call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ] Perform a test between two inputs. Parameters: x ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) y ( xr . DataArray ) \u2013 Shape (realization, time, vertical, latitude, longitude) Returns: success, value : tuple[bool, float] \u2013 The success of the test and the value of its statistic","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/tests/error_bound/","text":"error_bound climatebenchpress.compressor.tests.error_bound ErrorBound ErrorBound(error_type: str , threshold: float ) Bases: Test Tests whether the absolute or relative error between two arrays is below a threshold. For relative error, we use the formula |x - y| <= |x| *threshold to ensure that the error is also defined when the input x is zero. Consequently, the relative error also checks that the input and output have matching 0s. Additionally, this test checks that locations of nan and inf values in x and y match. Parameters: error_type ( str ) \u2013 Either \"abs_error\" for absolute error or \"rel_error\" for relative error. threshold ( float ) \u2013 The threshold value for the error. threshold instance-attribute threshold = threshold error_type instance-attribute error_type = error_type __call__ __call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ]","title":"error_bound"},{"location":"_ref/climatebenchpress/compressor/tests/error_bound/#error_bound","text":"climatebenchpress.compressor.tests.error_bound","title":"error_bound"},{"location":"_ref/climatebenchpress/compressor/tests/error_bound/#climatebenchpress.compressor.tests.error_bound.ErrorBound","text":"ErrorBound(error_type: str , threshold: float ) Bases: Test Tests whether the absolute or relative error between two arrays is below a threshold. For relative error, we use the formula |x - y| <= |x| *threshold to ensure that the error is also defined when the input x is zero. Consequently, the relative error also checks that the input and output have matching 0s. Additionally, this test checks that locations of nan and inf values in x and y match. Parameters: error_type ( str ) \u2013 Either \"abs_error\" for absolute error or \"rel_error\" for relative error. threshold ( float ) \u2013 The threshold value for the error.","title":"ErrorBound"},{"location":"_ref/climatebenchpress/compressor/tests/error_bound/#climatebenchpress.compressor.tests.error_bound.ErrorBound.threshold","text":"threshold = threshold","title":"threshold"},{"location":"_ref/climatebenchpress/compressor/tests/error_bound/#climatebenchpress.compressor.tests.error_bound.ErrorBound.error_type","text":"error_type = error_type","title":"error_type"},{"location":"_ref/climatebenchpress/compressor/tests/error_bound/#climatebenchpress.compressor.tests.error_bound.ErrorBound.__call__","text":"__call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ]","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/tests/r2_correlation/","text":"r2_correlation climatebenchpress.compressor.tests.r2_correlation R2 R2(threshold: float = 0.99999 ) Bases: Test Test whether the R^2 correlation coefficient between two arrays exceeds a threshold. Default threshold is taken from [1]. [1] Baker, Allison H., Haiying Xu, Dorit M. Hammerling, Shaomeng Li, and John P. Clyne. \"Toward a multi-method approach: Lossy data compression for climate simulation data.\" In International conference on high Performance computing, pp. 30-42. Cham: Springer International Publishing, 201 threshold instance-attribute threshold = threshold __call__ __call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ]","title":"r2_correlation"},{"location":"_ref/climatebenchpress/compressor/tests/r2_correlation/#r2_correlation","text":"climatebenchpress.compressor.tests.r2_correlation","title":"r2_correlation"},{"location":"_ref/climatebenchpress/compressor/tests/r2_correlation/#climatebenchpress.compressor.tests.r2_correlation.R2","text":"R2(threshold: float = 0.99999 ) Bases: Test Test whether the R^2 correlation coefficient between two arrays exceeds a threshold. Default threshold is taken from [1]. [1] Baker, Allison H., Haiying Xu, Dorit M. Hammerling, Shaomeng Li, and John P. Clyne. \"Toward a multi-method approach: Lossy data compression for climate simulation data.\" In International conference on high Performance computing, pp. 30-42. Cham: Springer International Publishing, 201","title":"R2"},{"location":"_ref/climatebenchpress/compressor/tests/r2_correlation/#climatebenchpress.compressor.tests.r2_correlation.R2.threshold","text":"threshold = threshold","title":"threshold"},{"location":"_ref/climatebenchpress/compressor/tests/r2_correlation/#climatebenchpress.compressor.tests.r2_correlation.R2.__call__","text":"__call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ]","title":"__call__"},{"location":"_ref/climatebenchpress/compressor/tests/spatial_relative_error/","text":"spatial_relative_error climatebenchpress.compressor.tests.spatial_relative_error SRE SRE(delta: float = 0.0001 , threshold: float = 0.05 ) Bases: Test Test whether the spatial relative error between two arrays exceeds a threshold. The spatial relative error is defined as the percentage of grid points where the relative error exceeds a given delta, i.e. \\(\\frac{1}{N} \\sum_i \\mathbb{I}[|x_i - y_i| / |x_i| > \\delta]\\) . Default threshold and delta is taken from [1]. [1] Baker, Allison H., Haiying Xu, Dorit M. Hammerling, Shaomeng Li, and John P. Clyne. \"Toward a multi-method approach: Lossy data compression for climate simulation data.\" In International conference on high Performance computing, pp. 30-42. Cham: Springer International Publishing, 201 Parameters: delta ( float , default: 0.0001 ) \u2013 The relative error threshold for each grid point. threshold ( float , default: 0.05 ) \u2013 The maximum proportion of grid points that can exceed the relative error threshold. delta instance-attribute delta = delta threshold instance-attribute threshold = threshold __call__ __call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ]","title":"spatial_relative_error"},{"location":"_ref/climatebenchpress/compressor/tests/spatial_relative_error/#spatial_relative_error","text":"climatebenchpress.compressor.tests.spatial_relative_error","title":"spatial_relative_error"},{"location":"_ref/climatebenchpress/compressor/tests/spatial_relative_error/#climatebenchpress.compressor.tests.spatial_relative_error.SRE","text":"SRE(delta: float = 0.0001 , threshold: float = 0.05 ) Bases: Test Test whether the spatial relative error between two arrays exceeds a threshold. The spatial relative error is defined as the percentage of grid points where the relative error exceeds a given delta, i.e. \\(\\frac{1}{N} \\sum_i \\mathbb{I}[|x_i - y_i| / |x_i| > \\delta]\\) . Default threshold and delta is taken from [1]. [1] Baker, Allison H., Haiying Xu, Dorit M. Hammerling, Shaomeng Li, and John P. Clyne. \"Toward a multi-method approach: Lossy data compression for climate simulation data.\" In International conference on high Performance computing, pp. 30-42. Cham: Springer International Publishing, 201 Parameters: delta ( float , default: 0.0001 ) \u2013 The relative error threshold for each grid point. threshold ( float , default: 0.05 ) \u2013 The maximum proportion of grid points that can exceed the relative error threshold.","title":"SRE"},{"location":"_ref/climatebenchpress/compressor/tests/spatial_relative_error/#climatebenchpress.compressor.tests.spatial_relative_error.SRE.delta","text":"delta = delta","title":"delta"},{"location":"_ref/climatebenchpress/compressor/tests/spatial_relative_error/#climatebenchpress.compressor.tests.spatial_relative_error.SRE.threshold","text":"threshold = threshold","title":"threshold"},{"location":"_ref/climatebenchpress/compressor/tests/spatial_relative_error/#climatebenchpress.compressor.tests.spatial_relative_error.SRE.__call__","text":"__call__ ( x: xr . DataArray , y: xr . DataArray ) -> tuple [ bool , float ]","title":"__call__"}]}